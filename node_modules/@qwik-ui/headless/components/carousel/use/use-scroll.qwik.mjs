import { useVisibleTaskQrl, inlinedQrl, useLexicalScope } from "@builder.io/qwik";
import { getCount, getElement } from "./utils.qwik.mjs";
const useScroll = (ref, { items, loop = true, transition = 350 }) => {
  const to = /* @__PURE__ */ inlinedQrl((index) => {
    const [items2, ref2, transition2] = useLexicalScope();
    const count = getCount(ref2);
    const element = getElement(ref2, index);
    if (!ref2?.value || !count) {
      console.warn(`Can't jump to ${index} because the carousel elements is empty.`);
      return;
    }
    if (!element) {
      console.warn(`Can't jump to ${index} because the element index ${index} doesn't exist.`);
      return;
    }
    setTimeout(() => element.scrollIntoView({
      behavior: "smooth",
      block: "nearest",
      inline: "center"
    }), transition2);
    items2.active.current.value = index;
  }, "useScroll_to_WrZidvDKeoY", [
    items,
    ref,
    transition
  ]);
  const previous = /* @__PURE__ */ inlinedQrl(() => {
    const [items2, loop2, ref2, to2] = useLexicalScope();
    if (!loop2 && items2.active.isFirst.value)
      return;
    const index = items2.active.isFirst.value ? getCount(ref2) - 1 : items2.active.current.value - 1;
    to2(index);
  }, "useScroll_previous_rvN0clYB7Bc", [
    items,
    loop,
    ref,
    to
  ]);
  const next = /* @__PURE__ */ inlinedQrl(() => {
    const [items2, loop2, ref2, to2] = useLexicalScope();
    const max = getCount(ref2) - 1;
    if (!loop2 && items2.active.current.value === max)
      return;
    const index = items2.active.current.value === max ? 0 : items2.active.current.value + 1;
    to2(index);
  }, "useScroll_next_CXf0hNVuUhM", [
    items,
    loop,
    ref,
    to
  ]);
  useVisibleTaskQrl(/* @__PURE__ */ inlinedQrl(() => {
    const [items2, to2] = useLexicalScope();
    to2(items2.active.current.value);
  }, "useScroll_useVisibleTask_vbzitETuPSM", [
    items,
    to
  ]));
  return {
    to,
    previous,
    next
  };
};
export {
  useScroll
};
