import{x as B,d as k,y as E,_ as A,M as R,j as G,e as K,G as U}from"./q-5cbd8fe3.js";import{E as X}from"./q-5e244c5f.js";var H=Object.defineProperty,Y=(t,e,i)=>e in t?H(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,T=(t,e,i)=>(Y(t,typeof e!="symbol"?e+"":e,i),i);class _e extends Error{constructor(e,i){super(typeof e=="string"?e:""),T(this,"name","FormError"),T(this,"errors"),this.errors=typeof e=="string"?i||{}:e}}function Ee(t,e,i){const{checked:r,files:n,options:s,value:l,valueAsDate:a,valueAsNumber:c}=t;return!i||i==="string"?l:i==="string[]"?s?[...s].filter(o=>o.selected&&!o.disabled).map(o=>o.value):r?[...e.value||[],l]:(e.value||[]).filter(o=>o!==l):i==="number"?c:i==="boolean"?r:i==="File"&&n?k(n[0]):i==="File[]"&&n?[...n].map(o=>k(o)):i==="Date"&&a?a:e.value}function N(t){return[...Object.values(t.internal.fields),...Object.values(t.internal.fieldArrays)]}function F(t,e){return t.internal.fieldArrays[e]}function Z(t,e){return+e.replace(`${t}.`,"").split(".")[0]}function w(t,e){$(t,!1).forEach(i=>{const r=F(t,i).items.length-1;e.filter(n=>n.startsWith(`${i}.`)&&Z(i,n)>r).forEach(n=>{e.splice(e.indexOf(n),1)})})}function $(t,e=!0){const i=Object.keys(t.internal.fieldArrays);return e&&w(t,i),i}function J(t,e=!0){const i=Object.keys(t.internal.fields);return e&&w(t,i),i}function h(t,e){return t.internal.fields[e]}function O(t,e,i){const r=J(t,i),n=$(t,i);return typeof e=="string"||Array.isArray(e)?(typeof e=="string"?[e]:e).reduce((s,l)=>{const[a,c]=s;return n.includes(l)?(n.forEach(o=>{o.startsWith(l)&&c.add(o)}),r.forEach(o=>{o.startsWith(l)&&a.add(o)})):a.add(l),s},[new Set,new Set]).map(s=>[...s]):[r,n]}function ee(t,{items:e,initialItems:i,error:r}={items:[],initialItems:[],error:""}){const n=i.join()!==e.join();return{internal:{initialItems:[...i],startItems:[...i],validate:[],consumers:[]},name:t,items:e,error:r,active:!1,touched:n,dirty:n}}function L(t,e){const i=r=>r instanceof Blob?r.size:r;return Array.isArray(t)&&Array.isArray(e)?t.map(i).join()!==e.map(i).join():t instanceof Date&&e instanceof Date?t.getTime()!==e.getTime():Number.isNaN(t)&&Number.isNaN(e)?!1:t!==e}function x(t,{value:e,initialValue:i,error:r}={value:void 0,initialValue:void 0,error:""}){const n=L(i,e);return{internal:{initialValue:i,startValue:i,validate:[],transform:[],elements:[],consumers:[]},name:t,value:e,error:r,active:!1,touched:n,dirty:n}}function I(t,e){return t.split(".").reduce((i,r)=>i==null?void 0:i[r],e)}let te=0;function D(){return te++}function ie({loader:t,action:e,fieldArrays:i}){function r(a){var c;return((c=e==null?void 0:e.value)==null?void 0:c.values)&&I(a,e.value.values)}const n=()=>D(),s=a=>{var c;return((c=e==null?void 0:e.value)==null?void 0:c.errors[a])||""},l=(a,c,o)=>Object.entries(c).reduce((y,[d,u])=>{var p;const f=o?`${o}.${d}`:d;if(i!=null&&i.includes(f.replace(/.\d+./g,".$."))){const _=u.map(n);y[1][f]=ee(f,{initialItems:_,items:((p=r(f))==null?void 0:p.map(n))||[..._],error:s(f)})}else(!u||typeof u!="object"||Array.isArray(u)||u instanceof Date)&&(y[0][f]=x(f,{initialValue:u,value:r(f)??u,error:s(f)}));return u&&typeof u=="object"&&l(y,u,f),y},a);return l([{},{}],t.value)}async function Ae(t,e){const i=await t.resolve();return(typeof i=="function"?i():i).safeParse(e)}function P(t,e){return(typeof t!="string"&&!Array.isArray(t)?t:e)||{}}function re(t,e){t.dirty=e||N(t).some(i=>i.active&&i.dirty)}function q(t,e){const i=L(e.internal.startValue,e.value);i!==e.dirty&&(e.dirty=i,re(t,i))}function Q(t,e){var i,r;(r=(i=h(t,e))==null?void 0:i.internal.elements[0])==null||r.focus()}function ne(t,e,i,{shouldActive:r=!0,shouldTouched:n=!1,shouldDirty:s=!1,shouldFocus:l=!!i}={}){for(const a of[h(t,e),F(t,e)])a&&(!r||a.active)&&(!n||a.touched)&&(!s||a.dirty)&&(a.error=i,i&&"value"in a&&l&&Q(t,e));M(t,!!i)}function Fe(t,e,{shouldActive:i=!0,shouldTouched:r=!1,shouldDirty:n=!1,shouldValid:s=!1}={}){const l=h(t,e);if(l&&(!i||l.active)&&(!r||l.touched)&&(!n||l.dirty)&&(!s||!l.error))return l.value}function se(t,e,i){const{shouldActive:r=!0,shouldTouched:n=!1,shouldDirty:s=!1,shouldValid:l=!1}=P(e,i);return O(t,e)[0].reduce((a,c)=>{const o=h(t,c);return(!r||o.active)&&(!n||o.touched)&&(!s||o.dirty)&&(!l||!o.error)&&(typeof e=="string"?c.replace(`${e}.`,""):c).split(".").reduce((y,d,u,f)=>y[d]=u===f.length-1?o.value:typeof y[d]=="object"&&y[d]||(isNaN(+f[u+1])?{}:[]),a),a},typeof e=="string"?[]:{})}function be(t,e,i){const[r,n]=O(t,e,!1),s=typeof e=="string"&&r.length===1,l=!s&&!Array.isArray(e),a=P(e,i),{initialValue:c,initialValues:o,keepResponse:y=!1,keepSubmitCount:d=!1,keepSubmitted:u=!1,keepValues:f=!1,keepDirtyValues:p=!1,keepItems:_=!1,keepDirtyItems:W=!1,keepErrors:S=!1,keepTouched:V=!1,keepDirty:j=!1}=a;r.forEach(b=>{const v=h(t,b);(s?"initialValue"in a:o)&&(v.internal.initialValue=s?c:I(b,o));const g=p&&v.dirty;!f&&!g&&(v.internal.startValue=v.internal.initialValue,v.value=v.internal.initialValue,v.internal.elements.forEach(m=>{m.type==="file"&&(m.value="")})),V||(v.touched=!1),!j&&!f&&!g&&(v.dirty=!1),S||(v.error="")}),n.forEach(b=>{var m;const v=F(t,b),g=W&&v.dirty;!_&&!g&&(o&&(v.internal.initialItems=((m=I(b,o))==null?void 0:m.map(()=>D()))||[]),v.internal.startItems=[...v.internal.initialItems],v.items=[...v.internal.initialItems]),V||(v.touched=!1),!j&&!_&&!g&&(v.dirty=!1),S||(v.error="")}),l&&(y||(t.response={}),d||(t.submitCount=0),u||(t.submitted=!1)),ce(t)}function ae(t,e,{duration:i}={}){t.response=e,i&&setTimeout(()=>{t.response===e&&(t.response={})},i)}function ge(t,e,i,{shouldTouched:r=!0,shouldDirty:n=!0,shouldValidate:s=!0,shouldFocus:l=!0}={}){const a=oe(t,e);a.value=i,r&&(a.touched=!0,t.touched=!0),n&&q(t,a),s&&z(t,a,e,{on:["touched","input"],shouldFocus:l})}async function le(t,e,i){const[r,n]=O(t,e),{shouldActive:s=!0,shouldFocus:l=!0}=P(e,i),a=D();t.internal.validators.push(a),t.validating=!0;const c=t.internal.validate?await t.internal.validate(se(t,{shouldActive:s})):{};let o=typeof e!="string"&&!Array.isArray(e)?!Object.keys(c).length:!0;const[y]=await Promise.all([Promise.all(r.map(async d=>{const u=h(t,d);if(!s||u.active){let f;for(const _ of u.internal.validate)if(f=await _(u.value),f)break;const p=f||c[d]||"";return p&&(o=!1),u.error=p,p?d:null}})),Promise.all(n.map(async d=>{const u=F(t,d);if(!s||u.active){let f="";for(const _ of u.internal.validate)if(f=await _(u.items),f)break;const p=f||c[d]||"";p&&(o=!1),u.error=p}}))]);if(ue(t,c,{shouldActive:s}),l){const d=y.find(u=>u);d&&Q(t,d)}return M(t,!o),t.internal.validators.splice(t.internal.validators.indexOf(a),1),t.internal.validators.length||(t.validating=!1),o}function me(t){var e;(e=t.element)==null||e.requestSubmit()}function z(t,e,i,{on:r,shouldFocus:n=!1}){r.includes((t.internal.validateOn==="submit"?t.submitted:e.error)?t.internal.revalidateOn:t.internal.validateOn)&&le(t,i,{shouldFocus:n})}async function Ie(t,e,i,r,n,s,l){l!==void 0&&(e.value=l);for(const a of e.internal.transform)e.value=await a(e.value,r,n);e.touched=!0,t.touched=!0,q(t,e),z(t,e,i,{on:s})}function oe(t,e){return h(t,e)||(t.internal.fields[e]=x(e)),h(t,e)}function ue(t,e,{duration:i,shouldActive:r=!0}){const n=Object.entries(e).reduce((s,[l,a])=>([h(t,l),F(t,l)].every(c=>!c||r&&!c.active)&&s.push(a),s),[]).join(" ");n&&ae(t,{status:"error",message:n},{duration:i})}function Ne(t,e,i){Object.entries(e).forEach(([r,n])=>{n&&ne(t,r,n,{...i,shouldFocus:!1})})}function M(t,e){t.invalid=e||N(t).some(i=>i.active&&i.error)}function ce(t){let e=!1,i=!1,r=!1;for(const n of N(t))if(n.active&&(n.touched&&(e=!0),n.dirty&&(i=!0),n.error&&(r=!0)),e&&i&&r)break;t.touched=e,t.dirty=i,t.invalid=r}function Oe(t,e){return X(B("s_VOLgKQUpNuc",[t,e]),{id:t.getHash()})}function De(t){return E(()=>A(()=>import("./q-2f4e1998.js"),[]),"s_b4MyjhrwMxE",[t])}const C=U(E(()=>A(()=>import("./q-6683514f.js"),[]),"s_vBVRkPF8kFE"));function fe({children:t,name:e,type:i,...r}){const{of:n}=r,s=h(n,e);return R(C,{store:s,...r,children:t(s,{name:e,autoFocus:!1,ref:E(()=>A(()=>import("./q-8ce22788.js"),[]),"s_0EFsQ07yXsM",[s]),onInput$:E(()=>A(()=>import("./q-8ce22788.js"),[]),"s_WQShqIriXzI",[s,n,e,i]),onChange$:E(()=>A(()=>import("./q-8ce22788.js"),[]),"s_vNtVq2dMPhY",[s,n,e]),onBlur$:E(()=>A(()=>import("./q-8ce22788.js"),[]),"s_fzfym1ErEFI",[s,n,e])})},0,e)}function de({children:t,name:e,...i}){const r=F(i.of,e);return R(C,{store:r,...i,children:t(r)},0,e)}function ve({of:t,action:e,onSubmit$:i,responseDuration:r,keepResponse:n,shouldActive:s,shouldTouched:l,shouldDirty:a,shouldFocus:c,reloadDocument:o,children:y,...d}){const{encType:u}=d,f={duration:r,shouldActive:s,shouldTouched:l,shouldDirty:a,shouldFocus:c};return G("form",{...d,action:e==null?void 0:e.actionPath,children:y,onSubmit$:E(()=>A(()=>import("./q-7bcb79df.js"),[]),"s_qmKnyqz75p4",[e,u,t,n,i,f,o]),"preventdefault:submit":!o,ref:p=>{t.element=p}},{method:"post",noValidate:!0},0,"Qg_0")}function ye({validate:t,validateOn:e="submit",revalidateOn:i="input",...r}){return K(()=>{var l,a;const[n,s]=ie(r);return{internal:{fields:n,fieldArrays:s,fieldArrayPaths:r.fieldArrays,validate:t,validators:[],validateOn:e,revalidateOn:i},element:void 0,submitCount:0,submitting:!1,submitted:!1,validating:!1,touched:!1,dirty:!1,invalid:!1,response:((a=(l=r.action)==null?void 0:l.value)==null?void 0:a.response)||{}}})}function Pe(t){const e=ye(t);return[e,{Form:i=>ve({of:e,action:t.action,...i}),Field:i=>fe({of:e,...i}),FieldArray:i=>de({of:e,...i})}]}export{_e as F,se as a,ae as b,ue as c,D as d,ge as e,me as f,Ee as g,Ie as h,Pe as i,De as j,Fe as k,Oe as l,Ae as m,be as r,Ne as s,ce as u,le as v};
